<!DOCTYPE html>
<html lang="en">
  {% load static %} {% load tag_lib %}
  <head>
    <meta charset="UTF-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Instagram Clone</title>
    <link rel="stylesheet" href="{% static './Instagram/css/home.css' %}" />
    <link
      rel="shortcut icon"
      href="{% static './Instagram/images/favicon.ico' %}"
      type="image/x-icon"
    />
    <link
      href="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/css/bootstrap.min.css"
      rel="stylesheet"
      integrity="sha384-1BmE4kWBq78iYhFldvKuhfTAU6auU8tT94WrHftjDbrCEXSU1oBoqyl2QvZ6jIW3"
      crossorigin="anonymous"
    />
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css">
    <script
      src="https://cdnjs.cloudflare.com/ajax/libs/js-cookie/3.0.1/js.cookie.min.js"
      integrity="sha512-wT7uPE7tOP6w4o28u1DN775jYjHQApdBnib5Pho4RB0Pgd9y7eSkAV1BTqQydupYDB9GBhTcQQzyNMPMV3cAew=="
      crossorigin="anonymous"
      referrerpolicy="no-referrer"
    ></script>
  </head>
  <body>
    <div class="main_story">
      <img
        src="{% static './Instagram/images/CSS IN ONE VIDOE.png' %}"
        alt=""
        id="story"
      />
    </div>
    {% include 'Instagram/navbar.html' %}
    <main>
      <div class="post_story">
        <div class="stories">
          <!-- USER STORIES STARTS HERE -->
          <div>
            <div class="add_story">
              <a href="{% url 'uploadstory' %}">
                <svg
                  width="30"
                  height="30"
                  viewBox="0 0 30 30"
                  fill="none"
                  xmlns="http://www.w3.org/2000/svg"
                  xmlns:xlink="http://www.w3.org/1999/xlink"
                >
                  <rect width="30" height="30" fill="url(#pattern0)" />
                  <defs>
                    <pattern
                      id="pattern0"
                      patternContentUnits="objectBoundingBox"
                      width="1"
                      height="1"
                    >
                      <use xlink:href="#image0_20_26" transform="scale(0.01)" />
                    </pattern>
                    <image
                      id="image0_20_26"
                      width="100"
                      height="100"
                      xlink:href="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAGQAAABkCAYAAABw4pVUAAAABmJLR0QA/wD/AP+gvaeTAAACgElEQVR4nO3cz2oTQQDH8a+t9e+lJ/GgfQ2tFfTgQcEUpc8hvocexXeQPoGeLfgQoaKues1BpHaLTQ+zQRQ1M0N25zfN7wNz6k472W/CbkInYGZmZmZmZnYKXOqGFXQdeAl8Babd+AK86H5mA9oBvvMrxJ/jG/Co2OqWzD3giH/HmI0WuFtojUtjDdhnfozZeA+cK7LSJfGY+BizsV1kpZlWSi8g0Z2B5hRTW5ArGXOuLnwVPaotyNmMOWsLX0WPagty6jmIGAcR4yBiHESMg4hxEDEOIsZBxDiIGAcR4yBiHESMg4hxEDEOIsZBxDiIGAcR4yBiHESMg4hxEDEOIsZBxJzJnLcKPAC2CJtjhvoP803gWuKcz8C7HtbyNy3QAHvAa+DnEH90i7QtAcs69oFbmec42jZxm2U8wmiBUdaZjrABTAQeZG1j0p27KCkX9afAesLxFqwDT2IPTrmoN6RfUC1oiHyVxAa5SNj1mntXtuymwGXgYN6Bfh8ynGnMQbFBDgib8i1PA/yIOTDlFfIqby1GT+fOt70D3PamGhHe7JR+kLWMFniYdaYTbALjwg+0hjEGbqae3Nzb2BXgPnCb8OHi+czfk0r9w8VDwgX8LfAGOB7o7xazS/ozdbfISjP5fYgYBxHjIGIcRIyDiHEQMQ4ixkHEOIgYBxHjIGIcRIyDiHEQMQ4ixkHEOIgYBxHjIGIcRIyDiHEQMQ4ixkHEOIiY2oK0GXMOF76KHtUWpMmY82nhq+hRbUH2BppjkVZJ+xaJMfU96apzg3BdmBfjiPA1IDaAEf/fXjdhgJ1L9rsN4DnwkbAx5hj4ADyjxz19FudCN8zMzMzMzMzqdgLxv0npGiRJXwAAAABJRU5ErkJggg=="
                    />
                  </defs>
                </svg>
              </a>
            </div>
            <span>Add Story</span>
          </div>
          {% for story in stories %}
          <div class="storyBx">
            <div class="story">
              <img src="{{story.story.url}}" alt="" id="story_image" />
            </div>
            {% if story.profile.user == request.user %}
            <span>Your Story</span>
            {% else %}
            <span>{{story.profile.user}}</span>
            {% endif %}
          </div>
          {% endfor %}
          <!-- USER STORIES ENDS HERE -->
        </div>

        <div class="posts">
          <!-- USER POSTS STARTS HERE -->
          {% for post in posts %}

          <div id="post">
            <div id="post_header">
              <div>
                <img
                  src="{{post.profile.profile_picture.url}}"
                  alt=""
                  srcset=""
                />
                <div class="post_details">
                  <h5 id="post_user">{{post.profile.user}}</h5>
                  <span id="post_address">{{post.post_address}}</span>
                </div>
              </div>
              <img
                class="more_icon"
                src="{% static './Instagram/images/More.png' %}"
                alt=""
              />
            </div>
            <img src="{{post.Image.url}}" alt="" id="user_post" />
            <div class="lower">
              <div>
                <a data-id="{{post.id}}" class="likeBtn" style="text-decoration:none;">
                 {% if not post|liked:post.id|is_liked_curr:request.user.username %}
                 <i class="fa fa-heart-o nol" aria-hidden="true" style="font-size:20px;"></i>
                 {% else %}
                 <i class="fa fa-heart liked" style="font-size:20px;"></i>
                 {% endif %}
                </a>
                <span id="span-{{post.id}}">{{post.likes.count}} likes</span>
                <a href="" id="comment">
                  <svg
                    aria-label="Comment"
                    class="_8-yf5"
                    color="#262626"
                    fill="#262626"
                    height="24"
                    role="img"
                    viewBox="0 0 48 48"
                    width="24"
                  >
                    <path
                      clip-rule="evenodd"
                      d="M47.5 46.1l-2.8-11c1.8-3.3 2.8-7.1 2.8-11.1C47.5 11 37 .5 24 .5S.5 11 .5 24 11 47.5 24 47.5c4 0 7.8-1 11.1-2.8l11 2.8c.8.2 1.6-.6 1.4-1.4zm-3-22.1c0 4-1 7-2.6 10-.2.4-.3.9-.2 1.4l2.1 8.4-8.3-2.1c-.5-.1-1-.1-1.4.2-1.8 1-5.2 2.6-10 2.6-11.4 0-20.6-9.2-20.6-20.5S12.7 3.5 24 3.5 44.5 12.7 44.5 24z"
                      fill-rule="evenodd"
                    ></path>
                  </svg>
                </a>
              </div>
              <p class="caption">{{post.caption}}</p>
            </div>
          </div>
          {% endfor %}
          <!-- USER POST ENDS HERE -->
        </div>
      </div>
    </main>
    <script
      src="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/js/bootstrap.bundle.min.js"
      integrity="sha384-ka7Sk0Gln4gmtz2MlQnikT1wXgYsOg+OMhuP+IlRH9sENBO0LRn5q+8nbTov4+1p"
      crossorigin="anonymous"
    ></script>
    <script src="{% static './Instagram/script.js' %}"></script>
  </body>
</html>
